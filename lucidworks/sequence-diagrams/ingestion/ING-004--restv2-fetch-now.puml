@startuml
/' 
@id: ING-004
@file: ING-004--restv2-fetch-now.puml
@title: Manual Sync via Fusion UI
@type: sequence
@description: A Fusion Admin manually triggers a data sync from Drupal by clicking â€œFetch Nowâ€ in Fusion UI.
@related: ING-001, ING-002, ING-003, ING-005
'/

/'
ğŸ›  Manual Sync Flow (Fusion UI)

Scenario:
1. Fusion Admin clicks â€œFetch Nowâ€ inside the Fusion connector interface.
2. Fusion connector pulls data from Drupalâ€™s JSON Export endpoint.
3. The indexing job processes the data and stores it into the Fusion Collection.

Requirements:
â€¢ Use actor for Fusion Admin.
â€¢ Use participants for Fusion Connector, Indexing Pipeline, Fusion Collection, and Drupal JSON Export.
â€¢ Use `as` aliases for clarity.
â€¢ Use activation blocks to represent processing.
â€¢ Use notes to indicate where the job was triggered manually.
â€¢ Style using `<style>` block for consistent visual theme.
'/

<style>
  title {
    FontSize 30
  }
  box {
    FontSize 25
    .drupalPlatform {
      BackgroundColor #F0F0F0
    }
    .fusionPlatform {
      BackgroundColor #E0F7F7
    }
  }
</style>

title Manual Sync via Fusion UI â€“ Lucidworks + Drupal Integration

autonumber

actor "Fusion Admin" as FusionAdmin

box "Fusion Platform" <<fusionPlatform>>
  participant FusionConnector [
    =ğŸ”§ Fusion Connector
    ----
    ""REST V2 Connector""
  ]
  participant IndexingPipeline [
    =ğŸ“Š Fusion Indexing
    ----
    ""Pipeline""
  ]
  database "ğŸ—ƒï¸ Fusion Collection" as FusionCollection
end box

box "Drupal Platform" <<drupalPlatform>>
  participant DrupalExport [
    =ğŸ”„ Drupal JSON Export
    ----
    ""/fusion-export/{$server}/{$index}""
  ]
end box

FusionAdmin -> FusionConnector: Click â€œFetch Nowâ€
note right of FusionConnector: Manual trigger from Fusion UI
activate FusionConnector
FusionConnector -> DrupalExport: Fetch JSON export
activate DrupalExport
DrupalExport --> FusionConnector: Return content data
deactivate DrupalExport

FusionConnector -> IndexingPipeline: Start indexing job
deactivate FusionConnector

activate IndexingPipeline
IndexingPipeline -> FusionCollection: Ingest into Fusion Collection
deactivate IndexingPipeline

note bottom
  âš ï¸ The â€œFetch Nowâ€ button in Fusion triggers 
  a one-time pull from Drupal. For large datasets 
  or frequent updates, scheduled jobs are preferred.
end note

legend bottom
|= Component             |= Meaning |
| **Fusion Platform**    ||
| ğŸ”§ Fusion Connector     | REST V2 connector that pulls data from Drupal |
| ğŸ“Š Fusion Indexing      | Lucidworks pipeline to transform & ingest |
| ğŸ—ƒï¸ Fusion Collection    | Final Lucidworks index target |
| **Drupal Platform**    ||
| ğŸ”„ Drupal JSON Export   | JSON endpoint exposed by Drupal for Fusion to crawl |
endlegend

@endumlÃŸ