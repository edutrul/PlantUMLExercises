@startuml

/' 
@id: COMP-002
@file: COMP-002--fusion-architecture-multisite.puml
@title: Fusion Architecture â€“ Multisite Indexing & Search
@type: component
@description: Shows how Drupal multisites (pro, edu, etc.) connect to Lucidworks Fusion using individual datasources and query pipelines with a shared indexing pipeline and central collection.
@related:
'/

<style>
  component {
    FontSize 14
    Padding 10
  }
  title {
    FontSize 24
  }
  database {
    FontSize 28
    Padding 12
    LineThickness 2
    BackgroundColor #F9F9F9
  }
</style>

title Fusion Architecture â€“ Multisite Indexing & Search

rectangle " " {
  package "Drupal Sites" {
    [ğŸ“¦ pro_baxter_com_datasource] <<component>>
    [ğŸ“¦ edu_baxter_com_datasource] <<component>>
    [ğŸ“¦ pro_baxter_ca_datasource] <<component>>
  }

  package "Fusion Platform" {
    package "Indexing Pipelines" {
      [ğŸ” shared_indexing_pipeline] <<component>>
    }

    package "Query Pipelines" {
      [ğŸ” pro_baxter_com_query_pipeline] <<component>>
      [ğŸ” edu_baxter_com_query_pipeline] <<component>>
      [ğŸ” pro_baxter_ca_query_pipeline] <<component>>
    }

    database "ğŸ—ƒï¸   COSMOS Collection   " as cosmos_collection
  }
}

' Indexing flow
[ğŸ“¦ pro_baxter_com_datasource] --> [ğŸ” shared_indexing_pipeline]
[ğŸ“¦ edu_baxter_com_datasource] --> [ğŸ” shared_indexing_pipeline]
[ğŸ“¦ pro_baxter_ca_datasource] --> [ğŸ” shared_indexing_pipeline]

[ğŸ” shared_indexing_pipeline] --> cosmos_collection

' Query flow
[ğŸ” pro_baxter_com_query_pipeline] --> cosmos_collection
[ğŸ” edu_baxter_com_query_pipeline] --> cosmos_collection
[ğŸ” pro_baxter_ca_query_pipeline] --> cosmos_collection

legend bottom
|= Symbol |= Meaning |
| ğŸ“¦       | Drupal-specific datasource |
| ğŸ”       | Site-specific query pipeline |
| ğŸ”       | Shared indexing pipeline |
| ğŸ—ƒï¸       | Shared Fusion Collection |
endlegend

@enduml